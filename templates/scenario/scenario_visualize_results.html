{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block start_body_scripts %}
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
{% endblock start_body_scripts %}

{% block content %}
    <div id='myDiv'></div>
{% endblock content %}


{% block end_body_scripts %}
    <script>
        var trace1 = {
            x: [1, 2, 3, 4],
            y: [10, 15, 13, 17],
            type: 'bar'
        };

        var trace2 = {
            x: [1, 2, 3, 4],
            y: [16, 5, 11, 9],
            type: 'scatter'
        };

        const plotTime = {{ tTime }};

        function convertToDateTime(unixTimestamp) {
            const milliseconds = unixTimestamp * 1000;
            const newDate = new Date(milliseconds);
            return newDate.toDateString();
        }

        plotTime.forEach(function(timeStamp, index) {
            this[index] = convertToDateTime(timeStamp);
        }, plotTime);

        var trace3 = {
            x: plotTime,
            y: {{ tData }},
            type: 'scatter'
        };

        var layout = {
            title: 'energyProduction',
            xaxis: {
                title: 'Year',
                showgrid: false,
                zeroline: false
            },
            yaxis: {
                title: 'Percent',
                showline: false
            }
        };

        //var data = [trace1, trace2];
        var data = [trace3];
        Plotly.newPlot('myDiv', data, layout);
    </script>
{% endblock end_body_scripts %}